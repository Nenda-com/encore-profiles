# Nenda VOD profile with 16:9 center-crop per ladder, b-pyramid disabled, standardized GOP and keyframe intervals for Alcom compatibility
name: vod-nenda-alcom-compatibility
description: Nenda VOD encodes with 16:9 center crop
scaling: bicubic

encodes:
  - type: X264Encode
    suffix: _x264_3100
    twoPass: false
    height: 1080
    filters:
      - "scale=-2:1080"
      - "crop=1920:1080:(in_w-1920)/2:(in_h-1080)/2"
    params:
      b:v: 3100k
      maxrate: 4700k
      bufsize: 6200k
      r: 25
      fps_mode: cfr
      pix_fmt: yuv420p
      force_key_frames: "expr:not(mod(n,48))"
      profile:v: high
      level: 4.1
      movflags: +faststart
    x264-params:
      deblock: 0,0
      aq-mode: 1
      aq-strength: 1.0
      b-adapt: 2
      bframes: 6
      b-bias: 0
      b-pyramid: 0
      chroma-qp-offset: -2
      direct: auto
      rc-lookahead: 60
      keyint: 48
      keyint_min: 48
      me: hex
      merange: 16
      cabac: 1
      partitions: all
      ref: 3
      scenecut: 0
      subme: 9
      trellis: 2
      weightp: 2
      open-gop: 0
    audioEncode:
      optional: true
      type: AudioEncode
      codec: aac
      bitrate: 128k
      suffix: STEREO

  - type: X264Encode
    suffix: _x264_2069
    twoPass: false
    height: 720
    filters:
      - "scale=-2:720"
      - "crop=1280:720:(in_w-1280)/2:(in_h-720)/2"
    params:
      b:v: 2069k
      maxrate: 3104k
      bufsize: 4138k
      r: 25
      fps_mode: cfr
      pix_fmt: yuv420p
      force_key_frames: "expr:not(mod(n,48))"
      profile:v: main
      level: 3.1
      movflags: +faststart
    x264-params:
      deblock: 0,0
      aq-mode: 1
      aq-strength: 1.0
      b-adapt: 2
      bframes: 6
      b-bias: 0
      b-pyramid: 0
      chroma-qp-offset: -2
      direct: auto
      rc-lookahead: 60
      keyint: 48
      keyint_min: 48
      me: hex
      merange: 16
      cabac: 1
      partitions: all
      ref: 3
      scenecut: 0
      subme: 9
      trellis: 2
      weightp: 2
      open-gop: 0
    audioEncode:
      optional: true
      type: AudioEncode
      codec: aac
      bitrate: 128k
      suffix: STEREO

  - type: X264Encode
    suffix: _x264_1312
    twoPass: false
    height: 540
    filters:
      - "scale=-2:540"
      - "crop=960:540:(in_w-960)/2:(in_h-540)/2"
    params:
      b:v: 1312k
      maxrate: 1968k
      bufsize: 2524k
      r: 25
      fps_mode: cfr
      pix_fmt: yuv420p
      force_key_frames: "expr:not(mod(n,48))"
      profile:v: main
      level: 3.1
      movflags: +faststart
    x264-params:
      deblock: 0,0
      aq-mode: 1
      aq-strength: 1.0
      b-adapt: 2
      bframes: 6
      b-bias: 0
      b-pyramid: 0
      chroma-qp-offset: -2
      direct: auto
      rc-lookahead: 60
      keyint: 48
      keyint_min: 48
      me: hex
      merange: 16
      cabac: 1
      partitions: all
      ref: 3
      scenecut: 0
      subme: 9
      trellis: 2
      weightp: 2
      open-gop: 0
    audioEncode:
      optional: true
      type: AudioEncode
      codec: aac
      bitrate: 96k
      suffix: STEREO

  - type: X264Encode
    suffix: _x264_806
    twoPass: false
    height: 360
    filters:
      - "scale=-2:360"
      - "crop=640:360:(in_w-640)/2:(in_h-360)/2"
    params:
      b:v: 806k
      maxrate: 1209k
      bufsize: 1612k
      r: 25
      fps_mode: cfr
      pix_fmt: yuv420p
      force_key_frames: "expr:not(mod(n,48))"
      profile:v: main
      level: 3.1
      movflags: +faststart
    x264-params:
      deblock: 0,0
      aq-mode: 1
      aq-strength: 1.0
      b-adapt: 2
      bframes: 6
      b-bias: 0
      b-pyramid: 0
      chroma-qp-offset: -2
      direct: auto
      rc-lookahead: 60
      keyint: 48
      keyint_min: 48
      me: hex
      merange: 16
      cabac: 1
      partitions: all
      ref: 3
      scenecut: 0
      subme: 9
      trellis: 2
      weightp: 2
      open-gop: 0
    audioEncode:
      optional: true
      type: AudioEncode
      codec: aac
      bitrate: 96k
      suffix: STEREO

  - type: X264Encode
    suffix: _x264_420
    twoPass: false
    height: 234
    filters:
      - "scale=-2:234"
      - "crop=416:234:(in_w-416)/2:(in_h-234)/2"
    params:
      b:v: 420k
      maxrate: 630k
      bufsize: 840k
      r: 25
      fps_mode: cfr
      pix_fmt: yuv420p
      force_key_frames: "expr:not(mod(n,48))"
      profile:v: main
      level: 3.1
      movflags: +faststart
    x264-params:
      deblock: 0,0
      aq-mode: 1
      aq-strength: 1.0
      b-adapt: 2
      bframes: 6
      b-bias: 0
      b-pyramid: 0
      chroma-qp-offset: -2
      direct: auto
      rc-lookahead: 60
      keyint: 48
      keyint_min: 48
      me: hex
      merange: 16
      cabac: 1
      8x8dct: 1
      partitions: all
      ref: 3
      scenecut: 0
      subme: 9
      trellis: 2
      weightp: 2
      open-gop: 0
    audioEncode:
      optional: true
      type: AudioEncode
      codec: aac
      bitrate: 96k
      suffix: STEREO